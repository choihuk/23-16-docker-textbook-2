---
marp: true
---
# 19. 도커를 이용한 로그 생성 및 관리

---
## 19.1 표준 에러 스트림과 표준 출력 스트림
* 도커 이미지 : 애플리케이션 바이너리 및 의존성, 그리고 컨테이너를 시작할 때 도커가 실행할 프로세스에 대한 정보 등을 담은 파일 시스템의 스냅샷이다.
* 도커는 각 컨테이너의 stdout, stderr 스트림을 수집합니다.
* 터미널 세션과 분리된 컨테이너와 종료된 컨테이너의 로그를 수집할 수 있도록 로그를 JSON 파일로도 저장한다.
---
## 19.2 다른 곳으로 출력된 로그를 stdout스트림에 전달하기

* 도커는 표준 출력 스트림을 통해서만 로그를 수집한다.
* 표준 출력 스트림이 아닌 채널을 사용해 로그를 출력하는 컨테이너는 로그 파일의 내용을 읽어 표준 출력으로 내부내주는 별도의 프로세스를 컨테이너 시작 명령에서 실행하면 된다.
* 로그를 전달하는 과정과 저장하는 과정이 두 번씩 실행되면서 연산 능력과 디스크 용량이 낭비되는 것이 단점

---
## 19.3 컨테이너 로그 수집 및 포워딩하기

* fluented : 통합 로깅 계층, 다양한 곳에서 생성되는 로그를 모으고, 필터링과 가공을 거쳐 다시 여러 대상으로 수집된 로그를 포워딩하는 역할
* 사용하기 쉽고 개발용 단일 컴퓨터에서 운영용 클러스터로 어렵지 않게 확장할 수도 있으며, 어떤 환경에서든 동일한 방법으로 사용할 수 있다. 로그에 메타 데이터를 추가하거나 필터를 적용해 로그 유형별로 저장소를 달리 할 수도 있다.

---
## 로그 출력 및 로그 컬렉션 관리하기
* 로그 필터링은 fluented 설정 파일에서 정의할 수 있다.

